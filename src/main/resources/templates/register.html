<head>
    <th:block th:insert="~{/fragments/head-fragment.html}" />
    <link rel="stylesheet" type="text/css" href="/css/register.css" />
    <title>Registrarse</title>
</head>

<body>
    <th:block th:insert="~{/fragments/header.html :: header-backbutton}" />
    <div id="container">
        <h1 id="titlebody">Registrarse</h1>

            <form id="addAddressForm" action="/user/regUser" method="post">
                <div class="form-group">
                    <label id="dir1" class="labelsPosition" for="nickname">Usuario:</label>
                    <input type="text" name="nickname" id= "nickname" placeholder="Nombre de usuario" required="required">
                </div>

                <div class="form-group">
                    <label id="dir2" class="labelsPosition" for="firstName">Nombre:</label>
                    <input type="text" name="firstname" id= "firstName" placeholder="Nombre" required= "required">
                </div>

                <div class="form-group">
                    <label id="dir3"class="labelsPosition" for="lastName">Apellidos:</label>
                    <input type="text" name="lastname" id= "lastName" placeholder="Apellidos" required= "required">
                </div>

                <div class="form-group">
                    <label id="dir3"class="labelsPosition" for="mail">Correo electrónico:</label>
                    <input type="email" name="mail" id= "regmail" placeholder="Correo electrónico" required= "required">
                </div>

                <div class="form-group">
                    <label id="dir3"class="labelsPosition" for="pass">Contraseña:</label>
                    <input type="password" name="pass" id="regpass" placeholder="Contraseña" required= "required">
                </div>

                <div class="form-group">
                    <p id="infopass">Al menos ocho caracteres, incluyendo mayúsculas, minúsculas y números</p>
                </div>

                <div class="form-group">
                    <label id="dir3"class="labelsPosition" for="pass">Repite la contraseña:</label>
                    <input type="password" name="password" id="password" placeholder="Repite la contraseña" required= "required">
                </div>

                <div class="form-group">
                    <div id="check-flex">
                        <input type="checkbox" name="accept" id="check" required><label for="check"><span style="color:black">Al marcar aceptas el </span>
                        <span style="color: tomato">tratamiento de datos</span></label>
                    </div>
                </div>

                <div id="submitButtonAlign">
                    <!--input type="submit" id="registerButton" value="Registrarse" /-->
                    <button id="submitAddress" type="submit">Registrarse</button>
                </div>

            </form>
        
            <div th:if="${created}" id="messageContainer">
                <p class="createdUser parpa">Usuario creado correctamente<br>Redirigiendo a la página de login...</p>
                <script>
                    setTimeout(() => {
                        window.location.href = '/login';
                    }, 8000);
                </script>
            </div>
            <!--div id="error1" class="errorUser parpa" th:if="${error == 'error1'}">
                <h1 style="color: red;">Correo electrónico YA registrado</h1>
            </div>
            <div id="error2" class="errorUser parpa" th:if="${error == 'error2'}">
                <h1 style="color: red;">Nombre de usuario NO disponible</h1>
            </div-->
            <div th:if="${errors != null}">
                <div class="errorUser parpa">
                    <ul>
                        <li th:each="error : ${errors}">
                            <span class="error-message" th:text="${error.defaultMessage}"></span>
                        </li>
                    </ul>
                </div>
            </div>
               
    </div> 
</body>
<div id="footerMargin"></div>
<th:block th:insert="~{/fragments/footer.html :: main-footer}" />
<script th:src="@{/js/register.js}"></script>

</html>